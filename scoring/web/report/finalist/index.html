<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'>
<html>
<head>
<title>Finalist Schedule Load</title>

<script type='text/javascript' src='../../extlib/jquery-1.7.1.min.js'></script>
<script type='text/javascript' src='../../extlib/jquery.json-2.3.min.js'></script>
<script type='text/javascript' src='../../extlib/jstorage.js'></script>
<script type='text/javascript' src='finalist.js'></script>
<!-- FIXME script type='text/javascript' src='schedule.js'></script -->
<script type='text/javascript'>
	var _loadingTournament = "Test";

	function clearData() {
		$.finalist.clearAllData();
	}

	function loadData() {
		console.log("Loading teams");

		//FIXME generate this list

		$.finalist.addDivision("Div I");
		$.finalist.addDivision("Div II");

		var team1 = $.finalist.addTeam(1, "Div I", "Team 1", "Org 1");

		// add all numeric categories
		var designCategory = $.finalist.addCategory("Design", true);

		// need judging group for each category for each team
		$.finalist.addCategoryScore(team1, designCategory, 102.5, "D1A");

		// add overall score
		$.finalist.addOverallScore(team1, 572.3, "D1A");

		$.finalist.setTournament(_loadingTournament);
	}

	$(document)
			.ready(
					function() {
						var allTeams = $.finalist.getAllTeams();
						console.log("All teams: " + allTeams + " is null: "
								+ (null == allTeams));
						var tournament = $.finalist.getTournament();
						if (null != allTeams && allTeams.length > 0) {
							if (tournament != _loadingTournament) {
								console.log("Clearing data for tournament: "
										+ tournament);
								clearData();
								loadData();
							} else {
								console
										.log("Data already exists for tournament ");
								var result = confirm("You have data already loaded for this tournament, would you like to clear it?");
								if (result) {
									clearData();
									loadData();
								}
							}
						} else {
							loadData();
						}
						//FIXME redirect to params.html
					});
</script>

</head>

<body>

	<p>
		This page is just javascript that loads initializes the local storage
		and then redirects to <a href='params.html'>finalst schedule
			params</a>
	</p>

	<!-- FIXME should add form elements to the document -->

</body>
</html>
